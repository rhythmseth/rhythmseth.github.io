<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 180 Project 4: Image Warping and Mosaicing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body class="bg-gray-100">
    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 h-screen bg-gray-800 text-white fixed overflow-y-auto">
            <div class="p-4">
                <h2 class="text-2xl font-semibold">CS 180 Project 4</h2>
            </div>
            <nav class="mt-6">
                <a href="#overview" class="block py-2 px-4 hover:bg-gray-700">Overview</a>
                <a href="#part1" class="block py-2 px-4 hover:bg-gray-700">Part 1: Recover Homographies</a>
                <a href="#part2" class="block py-2 px-4 hover:bg-gray-700">Part 2: Warp the Images</a>
                <a href="#part3" class="block py-2 px-4 hover:bg-gray-700">Part 3: Rectification</a>
                <a href="#part4" class="block py-2 px-4 hover:bg-gray-700">Part 4: Blend the Images into a Mosaic</a>
            </nav>
        </aside>

        <!-- Main content -->
        <main class="ml-64 p-8">
            <h1 class="text-4xl font-bold mb-6">CS 180 Project 4: Image Warping and Mosaicing</h1>
            <p class="mb-4">By Rhythm Seth</p>

            <section id="overview" class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">Overview</h2>
                <p class="mb-4">This project explores image mosaicing techniques, including recovering homographies, warping images, and blending them into a seamless mosaic. We'll go through several steps to achieve these fascinating visual effects.</p>
                <div class="flex justify-center mb-4">
                    <figure class="text-center">
                        <img src="./images/panorama.jpg" alt="Final Mosaic" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">Final Mosaic</figcaption>
                    </figure>
                </div>
            </section>

            <section id="part1" class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">Part 1A: Recover Homographies</h2>
                <p class="mb-4">This function uses point correspondences to set up and solve a linear system, recovering the 3x3 homography matrix. We used more than 4 correspondences and implemented a least-squares solution for stability.</p>
                <div class="mb-4">
                    $$
                    \begin{align*}
                    A[2i] &= [-x, -y, -1, 0, 0, 0, x \cdot x', y \cdot x', x'] \\
                    A[2i+1] &= [0, 0, 0, -x, -y, -1, x \cdot y', y \cdot y', y']
                    \end{align*}
                    $$
                </div>
                <p class="mb-4">Where (x, y) are the coordinates in the first image, and (x', y') are the corresponding coordinates in the second image. This system of equations is then solved to find the entries of the homography matrix H.</p>
            </section>

            <section id="part2" class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">Part 2: Warp the Images</h2>
                <p class="mb-4">Using the computed homography, we implemented an image warping function. This function transforms the source image to align with the target image's perspective.</p>
                <div class="flex justify-center mb-4 space-x-4">
                    <figure class="text-center">
                        <img src="./images/home1_resized.jpg" alt="Source Image 1" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">Home Image 1</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/home2_resized.jpg" alt="Source Image 2" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">Home Image 2</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/house_warp.png" alt="Warped Image" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Warped Image</figcaption>
                    </figure>
                </div>
                <div class="flex justify-center mb-4 space-x-4">
                    <figure class="text-center">
                        <img src="./images/arnav1_resized.jpg" alt="Source Image 1" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">Living Room Image 1</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/arnav2_resized.jpg" alt="Source Image 2" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">Living Room Image 2</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/arnav_warp.png" alt="Warped Image" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">Warped Image</figcaption>
                    </figure>
                </div>
                <div class="flex justify-center mb-4 space-x-4">
                    <figure class="text-center">
                        <img src="./images/tv1_resized.jpg" alt="Source Image 1" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">TV Image 1</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/tv2_resized.jpg" alt="Source Image 2" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">TV Image 2</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/warped_image_TV.png" alt="Warped Image" class="max-w-full h-auto" width="300" height="300">
                        <figcaption class="mt-2 text-sm text-gray-600">Warped Image</figcaption>
                    </figure>
                </div>
                <p class="mb-4">The warping process involves inverse mapping and interpolation to ensure smooth transformation of the image.</p>
            </section>

            <section id="part3" class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">Part 3: Rectification</h2>
                <p class="mb-4">We demonstrated the rectification process by selecting a rectangular object in an image (painting) and warping it to an approximate rectangle. We used the provided online correspondence tool same as we did in Project 3. This technique is useful for correcting perspective distortions.</p>
                <div class="flex justify-center mb-4 space-x-4">
                    <figure class="text-center">
                        <img src="./images/art.jpg" alt="Source Image" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Art Museum Image 1</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/rectified_art1.png" alt="Rectified Image" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Rectified Image</figcaption>
                    </figure>
                </div>
                <div class="flex justify-center mb-4 space-x-4">
                    <figure class="text-center">
                        <img src="./images/art2.jpeg" alt="Source Image" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Art Museum Image 2</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/rectified_art2.png" alt="Rectified Image" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Rectified Image</figcaption>
                    </figure>
                </div>
                <p class="mb-4">The rectification process involved defining corresponding points between the distorted rectangle and a target rectangle in the source image. (we picked points that define a rectangle when defining correspondences). As we can see in both images above, the distorted (due to perspective) rectangle has been rectified to a rectangle</p>
            </section>

            <section id="part4" class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">Part 4A: Blend the Images into a Mosaic</h2>
                <p class="mb-4">In this final step, we blended the two images into a mosaic using the warped images - we also see if naive blending works well. </p>
                <p class="mb-4">If naive blending wasn't working well, we tried to create a seamless mosaic by implementing a sophisticated blending technique that accounts for the overlap between the warped images. Our method involves the following key steps:</p>
                
                <ol class="list-decimal list-inside mb-4">
                    <li>Create binary masks for each image to identify non-black pixels.</li>
                    <li>Identify the overlapping region between the two images.</li>
                    <li>Generate weight matrices for each image using distance transforms. This assigns higher weights to pixels farther from the edge of each image.</li>
                    <li>Normalize the weights in the overlapping region to ensure a smooth transition.</li>
                    <li>Apply the weights to each image and combine them.</li>
                    <li>Use the masks to fill in non-overlapping regions with the original image content.</li>
                </ol>
            
                <p class="mb-4">This approach, which utilizes distance-based weighting, ensures a gradual and natural blend in the overlapping areas while preserving the original image content in non-overlapping regions. The result is a seamless mosaic that smoothly transitions between the input images.</p>
            
                <div class="flex justify-center mb-4">
                    <figure class="text-center">
                        <img src="./images/panorama.jpg" alt="Blended Mosaic 1" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Blended Mosaic 1</figcaption>
                    </figure>
                </div>
                <div class="flex justify-center mb-4 space-x-4">
                    <figure class="text-center">
                        <img src="./images/panorama2_without_alpha_blend.jpg" alt="Mosaic 2" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Mosaic 2 without Blending</figcaption>
                    </figure>
                    <figure class="text-center">
                        <img src="./images/panorama2.jpg" alt="Blended Mosaic 2" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Blended Mosaic 2</figcaption>
                    </figure>
                </div>
                <p class="mb-4">The image on the left has some artifacts (can be seen by looking closely at area near bathroom) which we can resolve by using alpha blending. The image on the right demonstrates the result of our blending technique, showing a smooth transition between the warped images and creating a cohesive panoramic view.</p>
                <div class="flex justify-center mb-4">
                    <figure class="text-center">
                        <img src="./images/panorama3_L2Distance.jpg" alt="Blended Mosaic 3" class="max-w-full h-auto" width="400" height="400">
                        <figcaption class="mt-2 text-sm text-gray-600">Blended Mosaic 3</figcaption>
                    </figure>
                </div>
            </section>
        </main>
    </div>
</body>
</html>